// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Account {
  id              Int             @id @default(autoincrement()) @db.UnsignedInt
  email           String?         @unique @db.VarChar(256)
  name            String          @unique @db.VarChar(50)
  password        String          @default("") @db.VarChar(256)
  second_password String?         @db.VarChar(256)
  gm              Int             @default(0) @db.UnsignedTinyInt
  gender          Int             @default(0) @db.UnsignedTinyInt
  logged_in       Boolean         @default(false)
  last_login      DateTime?       @db.Timestamp
  last_ip         String          @db.VarChar(64)
  created_at      DateTime        @default(now()) @db.Timestamp
  birthday        DateTime        @db.Date
  mac_address     String?         @db.TinyText
  cash            Int             @default(0) @db.UnsignedMediumInt
  point           Int             @default(0) @db.UnsignedMediumInt
  Charactor       Character[]
  InventoryItem   InventoryItem[]
}

model Character {
  id             Int      @id @default(autoincrement()) @db.UnsignedInt
  name           String   @unique
  acccount       Account  @relation(fields: [account_id], references: [id])
  account_id     Int      @db.UnsignedInt
  world          Int      @default(0) @db.TinyInt
  level          Int      @default(0) @db.UnsignedTinyInt
  exp            Int      @default(0) @db.Int
  ap             Int      @default(0)
  sp             String   @default("0,0,0,0,0,0,0,0,0,0") @db.VarChar(255)
  // sp             Int      @default(0)
  str            Int      @default(0) @db.UnsignedSmallInt
  dex            Int      @default(0) @db.UnsignedSmallInt
  luk            Int      @default(0) @db.UnsignedSmallInt
  int            Int      @default(0) @db.UnsignedSmallInt
  hp             Int      @default(0) @db.UnsignedSmallInt
  mp             Int      @default(0) @db.UnsignedSmallInt
  max_hp         Int      @default(0) @db.UnsignedSmallInt
  max_mp         Int      @default(0) @db.UnsignedSmallInt
  hp_apUsed      Int      @default(0) @db.UnsignedSmallInt
  meso           Int      @default(0) @db.UnsignedInt
  job            Int      @default(0) @db.UnsignedSmallInt
  gender         Int      @default(0) @db.UnsignedTinyInt
  fame           Int      @default(0) @db.MediumInt
  skin           Int      @default(0) @db.TinyInt
  hair           Int      @default(0) @db.Int
  face           Int      @default(0) @db.Int
  map            Int      @default(0) @db.Int
  spawn_point    Int      @default(0) @db.SmallInt
  gm             Int      @default(0) @db.UnsignedTinyInt
  party          Int      @default(0) @db.Int
  buddy_capacity Int      @default(25) @db.SmallInt
  created_at     DateTime @default(now()) @db.Timestamp

  inventory_item InventoryItem[]
  inventory_slot InventorySlot?
}

model InventoryItem {
  id             Int        @id @default(autoincrement()) @db.UnsignedInt
  character      Character? @relation(fields: [character_id], references: [id], onDelete: Cascade)
  character_id   Int?       @db.UnsignedInt
  account        Account?   @relation(fields: [account_id], references: [id])
  account_id     Int?       @db.UnsignedInt
  item_id        Int        @default(0) @db.Int
  inventory_type Int        @default(0) @db.Int
  position       Int        @default(0) @db.Int
  quantity       Int        @default(0) @db.Int
  type           Int        @db.TinyInt
}

model InventorySlot {
  id           Int        @id @default(autoincrement()) @db.UnsignedInt
  equip        Int?       @db.UnsignedTinyInt
  use          Int?       @db.UnsignedTinyInt
  setup        Int?       @db.UnsignedTinyInt
  etc          Int?       @db.UnsignedTinyInt
  cash         Int?       @db.UnsignedTinyInt
  character    Character? @relation(fields: [character_id], references: [id], onDelete: Cascade)
  character_id Int?       @unique @db.UnsignedInt
}
